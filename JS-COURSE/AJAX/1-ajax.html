<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AJAX</title>
</head>

<body>
  <table id="data-table" border="1">
    <thead>
      <tr>
        <th>ID</th>
        <th>Email</th>
        <th>Username</th>
        <th>Password</th>
      </tr>
    </thead>
    <tbody>
      <!-- Data will be inserted here -->
    </tbody>
  </table>

  <script>
    // Create a new XMLHttpRequest object
    var xhr = new XMLHttpRequest();

    // Specify the URL with the data source
    var url = 'http://filltext.com/?rows=5&id={index}&email={email}&username={username}&password={randomString|5}&pretty=true';

    // Configure it: GET-request for the URL
    xhr.open('GET', url, true);

    // Set up a function to handle the response
    xhr.onload = function () {
      if (xhr.status >= 200 && xhr.status < 300) {
        // Parse JSON data from the response
        var data = JSON.parse(xhr.responseText);
        console.log(data); // Log the data to the console

        // Populate the table with data
        var tbody = document.querySelector("#data-table tbody");
        tbody.innerHTML = ""; // Clear existing table rows

        data.forEach(function (item) {
          var myTableRow = document.createElement("tr");

          // Create and append table cells
          for (var key in item) {
            if (item.hasOwnProperty(key)) {
              var myTableData = document.createElement("td");
              myTableData.innerHTML = item[key];
              myTableRow.appendChild(myTableData);
            }
          }

          tbody.appendChild(myTableRow);
        });
      } else {
        // Handle errors (e.g., 404 or 500)
        console.error('Request failed. Status: ' + xhr.status);
      }
    };

    // Handle network errors
    xhr.onerror = function () {
      console.error('Request failed');
    };

    // Send the request
    xhr.send();
  </script>
</body>

</html>